

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Machine Learning, R Programming, Statistics, Artificial Intelligence">
    <meta name="author" content="Manuel Amunategui">
    <link rel="icon" href="../favicon.ico">

    <title>Understand Where Your Customers Are Coming From And Where They're Likely Going - Reporting On Complex Customer Behavior In Plain English</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../blog.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
<body>
  
 <div class="blog-masthead">
    <div class="container">
      <nav class="blog-nav">
        <a class="blog-nav-item active" href="../index.html">Home</a>
        <a class="blog-nav-item" href="https://www.linkedin.com/in/manuel-amunategui-20748923" target='_blank'>Linkedin</a>
        <a class="blog-nav-item" href="https://www.youtube.com/user/mamunate/videos" target='_blank'>Videos</a>
        <a class="blog-nav-item" href="https://github.com/amunategui/Feedback/issues/new" target='_blank'>Feedback</a>
      </nav>
    </div>
</div>

<div class="container">
  <div class="blog-header">
    <h1 class="blog-title">Understand Where Your Customers Are Coming From And Where They're Likely Going - Reporting On Complex Customer Behavior In Plain English</h1>
    <p class="lead blog-description">Practical walkthroughs on machine learning, data exploration and finding insight.</p>
  </div>
  
<p style="text-align:center">
<img src="img/C50-globe.png" alt="C50 Globe" style='padding:1px; border:1px solid #021a40; width: 50%; height: 50%'>
</p>
<p><br /><br /></p>

<p><strong>Resources</strong></p>
<ul>
<li type="square"><a href="https://www.youtube.com/watch?v=aL6Wugb0oGI&index=1&list=UUq4pm1i_VZqxKVVOz5qRBIA" target="_blank">YouTube Companion Video</a></li>
</ul>
<p><br />


<p>
At <a href='http://www.springml.com/' target='_blank'>SpringML</a>, we are known for our customer-facing, colorful, interactive and informative dashboards, and we are very proud of them. As you can imagine, it takes time to build those dashboards, but it also requires a lot of research to decide what to feed into them - what will be the most empowering and pertinent to the customer. In that spirit, we are constantly evaluating new techniques and new tools to better dive into the data and unearth more patterns and bottlenecks.
</p>
<p>
The <a href='https://cran.r-project.org/web/packages/C50/index.html' targer='_blank'>C5.0 Model (C5.0 Decision Trees and Rule-Based Models)</a> is one of those tools. It is a high performing, tree-based classification model. Much like a random forest, it takes random sets of features and measures how it affects a particular outcome. C5.0 outputs a set of complex, non-linear rules describing what features and at what level provide the most lift to the model. It doesn’t even require dummy variables for your categorical data, on the contrary, the closer your features are to the spoken language, the more readable the output. With some prep-work, we can automate the reporting of C5.0 results using a structure similar to the spoken language, something that anybody can understand - no statistics degree required!
</p>

<BR><BR>
<H1>Why Are Your Customers Churning?</H1>

<B>Out of 523 cases, 74% churned when:
<ol>
<li>total_day_charge > 38.25</li>
<li>total_eve_charge > 20.48</li>
</ol>

Out of 489 cases, 82% churned when:
<ol>
<li>total_night_minutes > 174</li>
<li>total_eve_minutes > 241</li>
<li>total_day_minutes > 224</li>
</ol>

Out of 416 cases, 61% churned when:
<ol>
<li>international_plan == yes</li>
</ol>

Out of 348 cases, 70% churned when:
<ol>
<li>total_day_charge < 38.25</li>
<li>number_customer_service_calls > 3</li>
</ol>
</B>
   

<BR><BR>
<p>We’ll use the built-in data set supplied with the C5.0 R library, called <code>Customer Churn</code> (note: in one of the source files states that the data are “artificial based on claims similar to real world”). As the name implies, the data contains customer information and usage records from a phone company including whether the customer churned or not.</p>
<p>This data set contains two data frames, a training (3333 entries) and testing (1667 entries). We’ll use <code>churnTrain</code> to keep things simple:</p>
<pre class="r"><code># install.packages('C50')
library(C50)
data(churn)

churn_data &lt;- churnTrain
outcome_name &lt;- 'churn'

# make the outcome variable easier to read
churn_data[,outcome_name] &lt;- as.factor(ifelse(churn_data[,outcome_name]=='yes','Does_Churn', 'Stays'))

str(churn_data)</code></pre>
<pre><code>## 'data.frame':    3333 obs. of  20 variables:
##  $ state                        : Factor w/ 51 levels &quot;AK&quot;,&quot;AL&quot;,&quot;AR&quot;,..: 17 36 32 36 37 2 20 25 19 50 ...
##  $ account_length               : int  128 107 137 84 75 118 121 147 117 141 ...
##  $ area_code                    : Factor w/ 3 levels &quot;area_code_408&quot;,..: 2 2 2 1 2 3 3 2 1 2 ...
##  $ international_plan           : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 2 2 2 1 2 1 2 ...
##  $ voice_mail_plan              : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 2 2 1 1 1 1 2 1 1 2 ...
##  $ number_vmail_messages        : int  25 26 0 0 0 0 24 0 0 37 ...
##  $ total_day_minutes            : num  265 162 243 299 167 ...
##  $ total_day_calls              : int  110 123 114 71 113 98 88 79 97 84 ...
##  $ total_day_charge             : num  45.1 27.5 41.4 50.9 28.3 ...
##  $ total_eve_minutes            : num  197.4 195.5 121.2 61.9 148.3 ...
##  $ total_eve_calls              : int  99 103 110 88 122 101 108 94 80 111 ...
##  $ total_eve_charge             : num  16.78 16.62 10.3 5.26 12.61 ...
##  $ total_night_minutes          : num  245 254 163 197 187 ...
##  $ total_night_calls            : int  91 103 104 89 121 118 118 96 90 97 ...
##  $ total_night_charge           : num  11.01 11.45 7.32 8.86 8.41 ...
##  $ total_intl_minutes           : num  10 13.7 12.2 6.6 10.1 6.3 7.5 7.1 8.7 11.2 ...
##  $ total_intl_calls             : int  3 3 5 7 3 6 7 6 4 5 ...
##  $ total_intl_charge            : num  2.7 3.7 3.29 1.78 2.73 1.7 2.03 1.92 2.35 3.02 ...
##  $ number_customer_service_calls: int  1 1 0 2 3 0 3 0 1 0 ...
##  $ churn                        : Factor w/ 2 levels &quot;Does_Churn&quot;,&quot;Stays&quot;: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
<p><strong>Straight up C5.0</strong></p>
<p>Let’s first look at the default summary output from C5.0:</p>
<pre class="r"><code>c50_model &lt;- C5.0(x=churn_data[,setdiff(names(churn_data), outcome_name)], churn_data[,outcome_name], rules = FALSE)
summary(c50_model)</code></pre>











<br><br>
<i>Special thanks to Lucas for the great data-brick-flip artwork!!!</i>


  
</div>   
</body>
</html>
